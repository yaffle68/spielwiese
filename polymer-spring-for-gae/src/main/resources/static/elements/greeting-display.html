<!-- <link rel='import' href='js/bower_components/polymer/polymer.html'></link> -->

<link rel="import" href="../js/bower_components/polymer/polymer.html">

<!-- <link rel="import" -->
<!-- 	href="https://polygit2.appspot.com/components/polymer/polymer.html"> -->
<link rel="import"
      href="../js/bower_components/iron-ajax/iron-ajax.html">
<link rel="import"
      href="../js/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import"
      href="../js/bower_components/iron-icons/maps-icons.html">

<link rel="import" href="../js/bower_components/iron-icon/iron-icon.html">
<link rel="import"
      href="../js/bower_components/iron-iconset-svg/iron-iconset-svg.html">

<dom-module id="greeting-display">
    <template>

        <style>
div.bubble {
	margin: 20px;
	padding: 20px;
	border-radius: 20px;
	background-color: #eee;
}

        </style>

        <iron-iconset-svg size="24" name="myicons">
            <svg>
                <defs>
                    <g id="system-update-alt">
                        <path d="M12 16.5l4-4h-3v-9h-2v9H8l4 4zm9-13h-6v1.99h6v14.03H3V5.49h6V3.5H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2z"></path>
                    </g>
                </defs>
            </svg>
        </iron-iconset-svg>


        <iron-ajax id="myworker" auto url="../resource"
                   handle-as="json" on-response="handleResponse" debounce-duration="300">

        </iron-ajax>
        <div class="bubble">
            <h1>Greeting</h1>
            <p>The ID is {{greetingid}}</p>
            <p>The content is {{greetingcontent}}</p>
            <p>
                <paper-icon-button icon="myicons:system-update-alt" on-click="reload">Refresh</paper-icon-button>
            </p>
        </div>
    </template>
    <script>
	// register a new element called proto-element
	Polymer({
		is : 'greeting-display',
		properties : {
			greetingid : String,
			greetingcontent : String
		},

		ready : function() {
			this.$.myworker.generateRequest();
		},

		handleResponse : function(data) {
			this.greetingid = data.detail.response.id;
			this.greetingcontent = data.detail.response.content;
		},

		reload : function() {
			this.$.myworker.generateRequest();
		}
	});

    </script>
</dom-module>






